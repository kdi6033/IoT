# WSM-4035 자동 개폐기 프로그램 개발 가이드   
## 제품 개요   
WSM-4035는 전동 스크류 드라이버로 스마트팜 농가에서 사용하기 적합한 자동 개폐기 장치입니다. 이 장치는 효율적인 작업 수행을 위해 정밀한 토크 제어와 빠른 반응 속도를 제공합니다.   
[우성하이텍 WSM-4035 제품링크](http://www.wsh.co.kr/ventcontrol2.html)  

## 제품 사양
- 모델명: WSM-4035  
- 구동방식: 유압식  
- 토크 제어: 알루미늄 합금  
- 출력 회전수: 4.2rpm  
- 전류: 2.6A  
- 토크: 최대 4kg·m  
- 무게: 2.4kg  
- 크기: 218 x 143 x 104mm   
![13 회로도](https://github.com/kdi6033/IoT/assets/37902752/23d57982-7c7e-4109-8350-dbc4409fbb20)


## 프로그램 설명
- 프로그램은 WSM-4035 모델을 이용하여 스마트팜 농가의 자동 개폐 시스템을 원격 제어합니다.
- WSM-4035 작동원리를 설명하고 프로그램 합니다.  
- 스마트폰에서 블루투스나 mqtt 통신을 이용하여 원격으로 제어하는 프로그램을 합니다.  
- [ai.doowon.ac.kr AI&IoT](https://ai.dooqon.ac.kr:1880/login) 사이트를 접속하면 자동으로 홈페이지가 만들어지고 여러개의 기기를 원격으로 제어 할 수 있습니다.

---------------------------------  
다은은 이전에 ESP D1mini로 개발했던 내용으로 지우지 않고 있으니 필요하신 분은 참조하도록 하세요.  
본릴레이 보드는 처음 나올때 국번(address)가 01로 나와있어 기존에 작성했던 프로그램을 그대로 사용하기 위해 
국번 변경 프로토콜을 이용하여 국번을 255로 변경하여 기존에 프로그램 업로드

9th (FF)에 있는 숫자에 따라 국번 변경 프로토콜
```
//00 10 00 00 00 01 02 00 _FF_ EB 80
//밑은 node-red function code
var buf = Buffer.alloc(9);
buf=[0x00,0x10,0x00,0x00,0x00,0x01,0x02,0x00,0xff,0x00,0x00];
msg.payload=buf;
return msg;
```
배선도
* 주의 TRX+ TRX- 선을 A+ B-랑 잘못 연결하면 릴레이의 485보드가 고장납니다.
![T13Motor](https://user-images.githubusercontent.com/37902752/137422739-71364d93-68f6-4799-9f55-e9dc4b9ff8a6.jpg)
